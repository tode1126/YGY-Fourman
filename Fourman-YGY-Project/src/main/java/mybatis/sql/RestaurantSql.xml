<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="restaurant">
	<insert id="restaurantInsert" parameterType="rdto">
		insert into restaurant (user_info_email, rest_name, rest_category, 
			rest_phone, rest_addr, rest_start, rest_end, rest_state, 
			rest_regdate) 
			VALUES(#{user_info_email}, #{rest_name}, #{rest_category}, 
				#{rest_phone}, #{rest_addr}, #{rest_start}, #{rest_end}, #{rest_state},
				now());
	</insert>
	<select id="restaurant_pkByEmailSelect" parameterType="String" resultType="int">
		select rest_pk from restaurant where user_info_email = #{email}
	</select>
	<select id="restaurantListByEmailSelect" parameterType="String" resultType="rdto">
		select * from restaurant where user_info_email = #{email}
	</select>
	
	<insert id="restaurant_menuInsert" parameterType="rmdto">
		INSERT INTO restaurant_menu (restaurant_rest_pk, menu_category, 
			menu_name, menu_price, menu_desc, menu_imagefile,
			menu_image_realname, menu_image_realpath, menu_image_size) 
			VALUES (#{restaurant_rest_pk}, #{menu_category}, 
				#{menu_name}, #{menu_price}, #{menu_desc}, #{menu_imagefile},
				#{menu_image_realname}, #{menu_image_realpath}, #{menu_image_size})
	</insert>
	<select id="restaurant_menuCountSelect" parameterType="int" resultType="int">
		select count(*) from restaurant_menu where restaurant_rest_pk = #{restaurant_rest_pk}
	</select>
	<select id="restaurant_menuSelect" parameterType="int" resultType="rmdto">
		select * from restaurant_menu where restaurant_rest_pk = #{restaurant_rest_pk} order by menu_pk asc
	</select>
	
	<select id="is_restaurant_tableCountSelect" parameterType="int" resultType="int">
		select count(*) from restaurant_table where restaurant_rest_pk = #{restaurant_rest_pk}
	</select>
</mapper>